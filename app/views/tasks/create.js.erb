const refreshForm = (innerHTML) => {
  const newTaskForm = document.getElementById('new_task');
  newTaskForm.innerHTML = innerHTML;
}

const addTask = (taskHTML) => {
  const tasks = document.getElementById('tasks');
  tasks.insertAdjacentHTML('beforeend', taskHTML);
}

<% if @task.errors.any? %>
  refreshForm('<%= j render "tasks/form", to_do_list: @to_do_list, task: @task %>');
<% else %>
  addtask('<%= j render "tasks/show", task: @task %>');
  refreshForm('<%= j render "tasks/form", to_do_list: @to_do_list, task: Task.new %>');
<% end %>
